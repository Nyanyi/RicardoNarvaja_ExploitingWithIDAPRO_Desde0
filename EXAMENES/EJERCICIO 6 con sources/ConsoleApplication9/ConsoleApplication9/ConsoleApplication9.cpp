// ConsoleApplication9.cpp: define el punto de entrada de la aplicaci√≥n de consola.
//

#include "stdafx.h"
#include <stdio.h>
#include <string.h>
#include <windows.h>
#include <WinBase.h>
#include <iostream>

using namespace std;



int i = 0;
FILE * f;

int main(int argc, char **argv) {

	char c;
	char readed[20];
	char desti[20];
	
	FILE *p_file = NULL;
	p_file = fopen("pepe.bin", "rb");
	if (p_file == 0) { exit(1); }

	fseek(p_file, 0, SEEK_END);
	int size = ftell(p_file);
	



	if (size != 0x1000) {exit(1); }

	cin.get(c);

	fread(readed, 1, 1, p_file);

	fclose(p_file);
	
	if (c != (char) readed+0x40) {
		cout << "exit bye..." << "\n";
		exit(1);
	}

	cout.put(c);

	LoadLibraryA("Mypepe.dll");
	

	f = fopen("pepe.bin", "rb");

	if (f == 0) { exit(1); }




	int x = 0;

	for(int i = 0; i < 0x1000;i++) {
		size_t result = fread(readed, 1, 1, f);
		if (result == 0) { exit(1); }
		if (readed[0] == 0x0 || readed[0] ==0x20) { exit(1);}
		x++;
	}
	
	fseek(f, 0, SEEK_SET);
	x = 0;
	int z = 0;
	for (int i = 0; i < 0x20; i++) {
		size_t result = fread(readed+z, 1, 1, f);
		if (result == 0) { exit(1); }
		int value = atoi(readed+z);
		printf("value %x\n", value);
		if (value == 0x0) { i=i-3; }
		memcpy(desti+x, readed + z, 1);
		x++;
		z += 2;
		
	}

	return 0;
}


