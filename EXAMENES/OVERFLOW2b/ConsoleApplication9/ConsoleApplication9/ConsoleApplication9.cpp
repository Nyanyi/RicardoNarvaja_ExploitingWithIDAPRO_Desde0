// ConsoleApplication9.cpp: define el punto de entrada de la aplicaci√≥n de consola.
//

#include "stdafx.h"
#include <stdio.h>
#include <string.h>
#include <windows.h>
#include <WinBase.h>

class MyClass
{
	
public:
	MyClass(int edad);
	~MyClass();
	virtual void print(MyClass * __pepe);
	char buf[10];
	int size;
	BOOL(*foo)(DWORD);
	char * str[20];
	int m_edad;
private:
	
	
};

MyClass::MyClass(int edad)
{
	m_edad = edad;
}


MyClass::~MyClass()
{
}

void MyClass::print(MyClass * __pepe) {
	for (int i = 0; i < 20; i++) {
		sprintf(__pepe->buf, "Salida %s\n", (char *)__pepe->str[i]);
	}

}

void saluda(MyClass * _pepe) {

	_pepe->print( _pepe);

}

int main(int argc, char **argv) {
	if (argc != 3) { exit(1); }

	MyClass pepe(atoi(argv[1]));
	
	pepe.foo = (BOOL(*)(DWORD)) & SetProcessDEPPolicy;
	
		
	
	if (argc == 3) {

		for (int i = 0; i <20; i++) {
			pepe.str[i] = (char *)malloc(200);
			strncpy((char *)pepe.str[i], argv[2],200);
		}
	
	
		if (pepe.m_edad < 20) {
			LoadLibraryA("Mypepe.dll");
			saluda(&pepe);
		}
	}
	return 0;
}


